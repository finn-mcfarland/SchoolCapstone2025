<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cyberbullying Detection â€“ Mock Comment Section</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }

    .container {
      width: 650px;
      margin-top: 40px;
      background: #fff;
      padding: 25px 35px;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #333;
    }

    .post {
      background: #fafafa;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px 20px;
      margin-bottom: 25px;
      font-size: 15px;
      line-height: 1.5;
      color: #444;
    }

    .input-row {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    #commentInput {
      flex: 1;
      padding: 12px;
      font-size: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      transition: border 0.2s;
    }

    #commentInput:focus {
      border-color: #007bff;
      outline: none;
    }

    button {
      padding: 12px 18px;
      font-size: 15px;
      font-weight: bold;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    button:hover {
      background-color: #0056b3;
      transform: translateY(-1px);
    }

    #comments {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .comment {
      padding: 12px 15px;
      border-radius: 10px;
      font-size: 15px;
      line-height: 1.4;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      position: relative;
    }

    .comment::after {
      content: attr(data-result);
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 13px;
      font-weight: bold;
      opacity: 0.8;
    }

    .bullying {
      background-color: #ffe5e5;
      border-left: 6px solid #e74c3c;
    }

    .bullying::after {
      color: #e74c3c;
    }

    .not-bullying {
      background-color: #e8f9e8;
      border-left: 6px solid #27ae60;
    }

    .not-bullying::after {
      color: #27ae60;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Cyberbullying Detection Demo</h2>

    <div class="post">
      <strong>Post:</strong><br><br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
      Praesent vel ligula scelerisque, finibus odio et, dapibus libero. 
      Quisque euismod, urna at bibendum lacinia, turpis nisl consequat lectus, 
      nec tristique urna magna vitae lorem. Donec sit amet mi id erat malesuada suscipit.
    </div>

    <div class="input-row">
      <input type="text" id="commentInput" placeholder="Write a comment..." />
      <button onclick="postComment()">Post</button>
    </div>

    <div id="comments"></div>
  </div>

  <script>
    async function postComment() {
      const input = document.getElementById("commentInput");
      const comment = input.value.trim();
      if (!comment) return;

      input.value = "";

      const response = await fetch("http://127.0.0.1:8000/classify", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ comment: comment })
      });

      const data = await response.json();

      const div = document.createElement("div");
      div.className = "comment " + (data.result === "Bullying" ? "bullying" : "not-bullying");
      div.setAttribute("data-result", `${data.result} (${data.response_time_ms} ms)`);

      // keep comment text separate from metadata
      div.innerText = data.comment;

      const comments = document.getElementById("comments");
      comments.insertBefore(div, comments.firstChild); // newest comment first
    }
  </script>
</body>
</html>
